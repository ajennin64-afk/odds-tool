<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Parlay Odds Helper (DraftKings Style)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root {
      --bg: #020617;
      --bg-page: #020617;
      --bg-card: #020617;
      --border: #1f2937;
      --text: #e5e7eb;
      --muted: #9ca3af;
      --accent: #22c55e;
    }

    * {
      box-sizing: border-box;
    }

    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: radial-gradient(circle at top, #0f172a 0, #020617 55%, #000 100%);
      color: var(--text);
      display: flex;
      justify-content: center;
      padding: 16px;
      margin: 0;
      min-height: 100vh;
    }

    .card {
      background: rgba(2, 6, 23, 0.96);
      border-radius: 18px;
      width: 100%;
      max-width: 560px;
      padding: 18px 16px 20px;
      box-shadow: 0 18px 45px rgba(0,0,0,0.7);
      border: 1px solid var(--border);
      backdrop-filter: blur(10px);
    }

    @media (min-width: 640px) {
      body {
        padding: 32px 20px;
      }
      .card {
        padding: 22px 20px 24px;
        border-radius: 20px;
      }
    }

    h1 {
      font-size: clamp(1.25rem, 3.5vw, 1.5rem);
      margin: 0 0 4px;
    }

    p {
      margin: 4px 0 12px;
      color: var(--muted);
      font-size: 0.9rem;
      line-height: 1.35;
    }

    label {
      display: block;
      margin-bottom: 6px;
      font-size: 0.85rem;
    }

    input,
    textarea {
      width: 100%;
      padding: 10px 11px;
      border-radius: 10px;
      border: 1px solid #4b5563;
      background: #020617;
      color: var(--text);
      font-size: 0.95rem;
      margin-bottom: 12px;
    }

    input:focus,
    textarea:focus {
      outline: none;
      border-color: var(--accent);
      box-shadow: 0 0 0 1px #22c55e33;
    }

    textarea {
      min-height: 80px;
      resize: vertical;
    }

    .grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 10px;
      margin-top: 10px;
    }

    @media (max-width: 480px) {
      .grid {
        grid-template-columns: 1fr;
      }
    }

    .stat {
      background: #020617;
      border-radius: 12px;
      padding: 9px 10px;
      border: 1px solid var(--border);
    }

    .stat-label {
      font-size: 0.7rem;
      text-transform: uppercase;
      letter-spacing: 0.06em;
      color: #6b7280;
    }

    .stat-value {
      font-size: 1.05rem;
      margin-top: 2px;
      word-break: break-all;
    }

    .explanation {
      margin-top: 14px;
      font-size: 0.85rem;
      color: #d1d5db;
      line-height: 1.35;
    }

    .hint {
      font-size: 0.78rem;
      color: var(--muted);
      margin-top: 2px;
      margin-bottom: 10px;
    }

    code {
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      font-size: 0.78rem;
      background: #020617;
      padding: 2px 4px;
      border-radius: 4px;
      border: 1px solid #111827;
    }

    .dk-tag {
      font-size: 0.7rem;
      color: #a7f3d0;
      background: #064e3b;
      display: inline-block;
      padding: 3px 8px;
      border-radius: 999px;
      margin: 4px 0 10px;
      text-transform: uppercase;
      letter-spacing: 0.08em;
    }
  </style>
</head>
<body>
  <div class="card">
    <h1>Parlay Odds Helper</h1>
    <p>
      Paste your DraftKings-style parlay legs and see the combined hit rate, DK-style odds,
      payout on your stake, and a “coin-flip EV equivalent” line.
    </p>

    <div class="dk-tag">DraftKings multi-game parlay math (no boosts)</div>

    <label for="parlayOdds">Parlay leg odds</label>
    <textarea id="parlayOdds">-110, -110, -110</textarea>
    <div class="hint">
      Separate legs by comma, space, or newline. Example:
      <code>-142, -164, +120, -112, +126</code>
    </div>

    <label for="stake">Stake amount (your bet)</label>
    <input id="stake" type="number" value="10" min="0" step="0.01" />

    <div class="grid">
      <div class="stat">
        <div class="stat-label">Combined hit rate</div>
        <div id="parlayHitRate" class="stat-value">–</div>
      </div>
      <div class="stat">
        <div class="stat-label">DK-style decimal price</div>
        <div id="parlayDecimal" class="stat-value">–</div>
      </div>
    </div>

    <div class="grid">
      <div class="stat">
        <div class="stat-label">DraftKings-style odds</div>
        <div id="parlayPayoutOdds" class="stat-value">–</div>
      </div>
      <div class="stat">
        <div class="stat-label">Stake → total return</div>
        <div id="parlayStakeReturn" class="stat-value">–</div>
      </div>
    </div>

    <div class="grid">
      <div class="stat">
        <div class="stat-label">Coin-flip EV equivalent</div>
        <div id="coinFlipOdds" class="stat-value">–</div>
      </div>
      <div class="stat">
        <div class="stat-label">Single-line prob equivalent</div>
        <div id="parlayImpliedOdds" class="stat-value">–</div>
      </div>
    </div>

    <div id="parlayExplanation" class="explanation"></div>
    <div class="hint">
      This mirrors standard DK multi-game parlay logic (multiply each leg’s decimal odds).
      Same-game parlays and profit boosts will pay differently.
    </div>
  </div>

  <script>
    function americanToProb(odds) {
      odds = Number(odds);
      if (!odds || odds === 0) return NaN;
      if (odds > 0) {
        return 100 / (odds + 100);
      } else {
        const abs = Math.abs(odds);
        return abs / (abs + 100);
      }
    }

    function americanToDecimal(odds) {
      odds = Number(odds);
      if (!odds || odds === 0) return NaN;
      if (odds > 0) {
        return 1 + odds / 100;
      } else {
        const abs = Math.abs(odds);
        return 1 + 100 / abs;
      }
    }

    function decimalToAmerican(dec) {
      dec = Number(dec);
      if (!dec || dec <= 1) return NaN;
      if (dec >= 2) {
        return (dec - 1) * 100;
      } else {
        return -100 / (dec - 1);
      }
    }

    function probToAmerican(p) {
      p = Number(p);
      if (p <= 0 || p >= 1 || isNaN(p)) return NaN;
      if (p > 0.5) {
        return -Math.round((p / (1 - p)) * 100);
      } else {
        return Math.round(((1 - p) / p) * 100);
      }
    }

    function formatPct(p) {
      if (isNaN(p)) return "–";
      return (p * 100).toFixed(2) + "%";
    }

    function formatOdds(o) {
      if (isNaN(o)) return "–";
      const rounded = Math.round(o);
      return (rounded > 0 ? "+" : "") + rounded;
    }

    function formatMoney(x) {
      if (isNaN(x)) return "–";
      return "$" + x.toFixed(2);
    }

    function updateParlay() {
      const input = document.getElementById("parlayOdds").value;
      const stakeInput = Number(document.getElementById("stake").value) || 0;

      const parts = input
        .split(/[\s,]+/)
        .map(s => s.trim())
        .filter(s => s.length > 0);

      const hitRateEl = document.getElementById("parlayHitRate");
      const decEl = document.getElementById("parlayDecimal");
      const impliedOddsEl = document.getElementById("parlayImpliedOdds");
      const coinFlipOddsEl = document.getElementById("coinFlipOdds");
      const payoutOddsEl = document.getElementById("parlayPayoutOdds");
      const stakeReturnEl = document.getElementById("parlayStakeReturn");
      const explanationEl = document.getElementById("parlayExplanation");

      if (parts.length === 0) {
        hitRateEl.textContent = decEl.textContent =
          impliedOddsEl.textContent = coinFlipOddsEl.textContent =
          payoutOddsEl.textContent = stakeReturnEl.textContent = "–";
        explanationEl.textContent = "";
        return;
      }

      let combinedProb = 1;
      let combinedDecimal = 1;
      let validCount = 0;

      for (const s of parts) {
        const odds = Number(s);
        const p = americanToProb(odds);
        const d = americanToDecimal(odds);
        if (isNaN(p) || isNaN(d)) continue;
        combinedProb *= p;
        combinedDecimal *= d;
        validCount++;
      }

      if (validCount === 0) {
        hitRateEl.textContent = decEl.textContent =
          impliedOddsEl.textContent = coinFlipOddsEl.textContent =
          payoutOddsEl.textContent = stakeReturnEl.textContent = "–";
        explanationEl.textContent = "Enter at least one valid odds number (e.g. -110, -130, +120).";
        return;
      }

      const parlayDec = combinedDecimal;
      const parlayAm = decimalToAmerican(parlayDec);

      hitRateEl.textContent = formatPct(combinedProb);
      decEl.textContent = isNaN(parlayDec) ? "–" : parlayDec.toFixed(2);
      payoutOddsEl.textContent = formatOdds(parlayAm);

      if (stakeInput > 0 && !isNaN(parlayDec)) {
        const totalReturn = stakeInput * parlayDec;
        const profit = totalReturn - stakeInput;
        stakeReturnEl.textContent =
          `${formatMoney(stakeInput)} → ${formatMoney(totalReturn)} (profit ${formatMoney(profit)})`;
      } else {
        stakeReturnEl.textContent = "–";
      }

      const impliedSingleOdds = probToAmerican(combinedProb);
      impliedOddsEl.textContent = formatOdds(impliedSingleOdds);

      const EV_parlay = combinedProb * (parlayDec - 1) - (1 - combinedProb);
      const coinFlipDec = 2 * (EV_parlay + 1);
      const coinFlipAm = decimalToAmerican(coinFlipDec);
      coinFlipOddsEl.textContent = isNaN(coinFlipAm) ? "–" : formatOdds(coinFlipAm);

      const legsStr = parts.join(", ");
      explanationEl.textContent =
        `For legs ${legsStr}, the implied chance of the entire parlay cashing (in DK-style math) is about ` +
        `${(combinedProb * 100).toFixed(2)}%. That’s similar to betting a single line at ` +
        `${formatOdds(impliedSingleOdds)} in terms of pure probability. ` +
        `With a decimal price of ~${parlayDec.toFixed(2)}x, the EV is roughly ` +
        `${EV_parlay.toFixed(3)} units per 1 staked. A fair 50/50 “coin-flip” bet with the same EV ` +
        `would need to be priced around ${isNaN(coinFlipAm) ? "N/A" : formatOdds(coinFlipAm)}.`;
    }

    document.getElementById("parlayOdds").addEventListener("input", updateParlay);
    document.getElementById("stake").addEventListener("input", updateParlay);

    updateParlay();
  </script>
</body>
</html>
